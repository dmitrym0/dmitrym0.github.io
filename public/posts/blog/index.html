<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Dmitry M">
    <meta name="description" content="Dmitry&#39;s personal website">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Blog"/>
<meta name="twitter:description" content="digital gardens
TODO Reference Blog post here: https://www.shanesveller.com/blog/2018/02/13/blogging-with-org-mode-and-ox-hugo/
TODO Old blog look Pages About General I like building stuff.
Projects org-hyperscheduler org-hyperscheduler is an Emacs package that uses a calendar web component to visualize org-mode agenda.
More information is available on GitHub.
Also on MELPA.
simple-lets-encrypt-docker-compose-sample simple-lets-encrypt-docker-compose-sample is a sample docker-compose.yml that shows how to leverage docker-letsencrypt-nginx-proxy-companion to automatically terminate SSL connections.
org-reminders-importer A SwiftUI iOS app to grab reminders and dump them into a text file on Dropbox."/>

    <meta property="og:title" content="Blog" />
<meta property="og:description" content="digital gardens
TODO Reference Blog post here: https://www.shanesveller.com/blog/2018/02/13/blogging-with-org-mode-and-ox-hugo/
TODO Old blog look Pages About General I like building stuff.
Projects org-hyperscheduler org-hyperscheduler is an Emacs package that uses a calendar web component to visualize org-mode agenda.
More information is available on GitHub.
Also on MELPA.
simple-lets-encrypt-docker-compose-sample simple-lets-encrypt-docker-compose-sample is a sample docker-compose.yml that shows how to leverage docker-letsencrypt-nginx-proxy-companion to automatically terminate SSL connections.
org-reminders-importer A SwiftUI iOS app to grab reminders and dump them into a text file on Dropbox." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dmitrym.online/posts/blog/" /><meta property="article:section" content="posts" />

<meta property="article:modified_time" content="2023-11-06T17:25:45-08:00" />



    
      <base href="https://dmitrym.online/posts/blog/">
    
    <title>
  Blog · Dmitry M - Veridis Quo
</title>

    
      <link rel="canonical" href="https://dmitrym.online/posts/blog/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://dmitrym.online/css/coder.min.8a0620e4f0e4dc1d46e4547e92d30120d90b9c9d55f9b1301a8646c76ffe6d3b.css" integrity="sha256-igYg5PDk3B1G5FR&#43;ktMBINkLnJ1V&#43;bEwGoZGx2/&#43;bTs=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="https://dmitrym.online/css/custom.css" />
    
      <link rel="stylesheet" href="https://dmitrym.online/images/syntax.css" />
    

    

    

    <link rel="icon" type="image/png" href="https://dmitrym.online/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://dmitrym.online/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.102.3" />
  </head>

  
  
  <body class="colorscheme-light">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://dmitrym.online/">
      Dmitry M - Veridis Quo
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://dmitrym.online/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://dmitrym.online/tags/">Tags</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://dmitrym.online/pages/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://dmitrym.online/pages/projects/">Projects</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Blog</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2023-11-06T17:25:45-08:00'>
                November 6, 2023
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              48 minutes read
            </span>
          </div>
          
          
        </div>
      </header>

      <div>
        <p><a href="">digital gardens</a></p>
<h2 id="reference"><span class="org-todo todo TODO">TODO</span> Reference</h2>
<p>Blog post here: <a href="https://www.shanesveller.com/blog/2018/02/13/blogging-with-org-mode-and-ox-hugo/">https://www.shanesveller.com/blog/2018/02/13/blogging-with-org-mode-and-ox-hugo/</a></p>
<h2 id="old-blog-look"><span class="org-todo todo TODO">TODO</span> Old blog look</h2>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2019-07-13_21-36-41.png"/>
</figure>

<h2 id="pages">Pages</h2>
<h3 id="about">About <span class="tag"><span class="General">General</span></span></h3>
<p>I like building stuff.</p>
<h3 id="projects">Projects</h3>
<h4 id="org-hyperscheduler">org-hyperscheduler</h4>
<p><a href="https://github.com/dmitrym0/org-hyperscheduler">org-hyperscheduler</a> is an Emacs package that uses a calendar web component to visualize org-mode agenda.</p>
<p>More information is available on <a href="https://github.com/dmitrym0/org-hyperscheduler">GitHub</a>.</p>
<p>Also on <a href="https://melpa.org/#/org-hyperscheduler">MELPA</a>.</p>
<h4 id="simple-lets-encrypt-docker-compose-sample">simple-lets-encrypt-docker-compose-sample</h4>
<p><a href="https://github.com/dmitrym0/simple-lets-encrypt-docker-compose-sample">simple-lets-encrypt-docker-compose-sample</a> is a sample <code>docker-compose.yml</code> that shows how to leverage <a href="https://github.com/jwilder/docker-letsencrypt-nginx-proxy-companion">docker-letsencrypt-nginx-proxy-companion</a> to automatically terminate SSL connections.</p>
<h4 id="org-reminders-importer">org-reminders-importer</h4>
<p>A SwiftUI iOS app to grab reminders and dump them into a text file on Dropbox.</p>
<h4 id="paratroopers">paratroopers</h4>
<p>An <a href="https://www.libsdl.org">SDL</a> based iOS game:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sNO1A80wxOg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Here&rsquo;s what the original looked like:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/SnPUsspS-LM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="home">Home</h3>
<p>some sort of content</p>
<h2 id="posts">Posts</h2>
<h3 id="misc"><span class="org-todo done DONE">DONE</span> Misc</h3>
<h4 id="omnifocus-review-with-org-mode">Omnifocus style reviews with org-mode <span class="tag"><span class="Emacs">Emacs</span><span class="orgmode">orgmode</span></span></h4>
<p>I started using Emacs and org-mode in earnest in the middle of 2019. At that point in time I was using Omnifocus to track my tasks and Bearapp for notes. I was missing
plaintext functionality. Since then I&rsquo;ve reproduced most of the functionality that Omnifocus offerred except one particular feature: reviews.</p>
<p>In GTD, reviews occupy a pretty important niche. Without regular task and project reviews task lists tend to grow out of control and become polutted. One important consideration for a
task list is for it to closely resemble the actual state of what you have to do.</p>
<p>I went looking for a way to do automated reviews in org, and found <a href="https://github.com/brabalan/org-review">org-review</a>.</p>
<p>org-review relies on the <code>LAST_REVIEW</code> property to determine when the next review (<code>NEXT_REVIEW</code>) should happen and out of the box this property is not generated.</p>
<p>I wrote a bit of elisp to auto generate these properties for all <code>TODO</code> entries when a file is saved. This guarantees that the entry will bubble up for review a month after creation. Month is a default review duration
that can be configured via <code>REVIEW_DELAY</code> property.</p>
<p>Add this somewhere in <code>~/.emacs</code> or similar.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my/org-add-next-review-property</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Add NEXT_REVIEW property to headlines that don&#39;t have one&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">org-map-entries</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">org-entry-get</span> <span class="no">nil</span> <span class="s">&#34;NEXT_REVIEW&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">org-review-insert-last-review</span><span class="p">))</span> <span class="s">&#34;TODO=\&#34;TODO\&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;before-save-hook</span> <span class="ss">&#39;my/org-add-next-review-property</span> <span class="ss">&#39;local</span><span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The process will look something like this:</p>
<ol>
<li>Add a <code>TODO</code> task to inbox</li>
<li>Once a file is saved the <code>*_REVIEW</code> properties are generated.</li>
<li>&hellip; some time passess &hellip;</li>
<li>Hit <code>C-c a R</code> to start the review mode.</li>
<li>Hit <code>C-c C-r</code> to review selected items.</li>
</ol>
<h4 id="tircd-twitter-gateway">tircd, irc twitter gateway <span class="tag"><span class="Linux">Linux</span></span></h4>
<p>I published my <a href="https://github.com/dmitrym0/tircd">tircd branch</a>. If you&rsquo;re
unfamiliar with <a href="https://code.google.com/p/tircd/">tircd</a> it&rsquo;s a daemon that
presents Twitter as an IRC channel. I merged <a href="https://github.com/DexterTheDragon/tircd">this really old branch</a> that implements Twitter lists
as channels with the semi official <a href="https://github.com/drags/tircd">google code mirror branch</a>.  I created a <a href="https://github.com/drags/tircd/pull/1">pull request</a> but it hasn&rsquo;t been acted on yet.</p>
<p>I consume my instant messaging via IRC (with the help of
<a href="https://symlink.me/projects/minbif/wiki">minbif</a>) and now Twitter too. Quite
convenient.</p>
<p>This is what my Twitter looks like right now:</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-07_15-34-53.png"/>
</figure>

<h4 id="reading-font-from-file-and-making-it-available-to-cocoa">Reading a font from file an making it available to Cocoa <span class="tag"><span class="Cocoa">Cocoa</span><span class="MacOS">MacOS</span></span></h4>
<p>This is another programming related post.</p>
<p>Say you have a true type font that&rsquo;s not part of the OS font set in a file. You&rsquo;ve read the contents of the file into memory and now want to make it available to Cocoa. How?</p>
<p>Turns out that ATSUI comes to the rescue:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C++" data-lang="C++"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ATSFontContainerRef</span> <span class="n">container</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">OSStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="n">ATSFontActivateFromMemory</span><span class="p">((</span><span class="n">LogicalAddress</span><span class="p">)[</span><span class="n">fontData</span> <span class="n">bytes</span><span class="p">],</span>           <span class="c1">// buffer with font data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">[</span><span class="n">fontData</span> <span class="n">length</span><span class="p">],</span>          <span class="c1">// size of font data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">kATSFontContextLocal</span><span class="p">,</span>       <span class="c1">// for use only in this application
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">kATSFontFormatUnspecified</span><span class="p">,</span>  <span class="c1">// reserved
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nb">NULL</span><span class="p">,</span>                       <span class="c1">// reserved
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">kATSOptionFlagsDefault</span><span class="p">,</span>     <span class="c1">// reserved
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="o">&amp;</span><span class="n">container</span><span class="p">);</span>                <span class="c1">// on output, will contain the activated font
</span></span></span><span class="line"><span class="cl"><span class="c1">// find the number of font references in the container (goes to numItems)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ItemCount</span> <span class="n">numItems</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">status</span> <span class="o">=</span> <span class="n">ATSFontFindFromContainer</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">kATSOptionFlagsDefault</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">numItems</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">NSLog</span><span class="p">(</span><span class="err">@</span><span class="s">&#34;There are %d references in the container</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">numItems</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// load the individual fonts
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ATSFontRef</span> <span class="o">*</span><span class="n">ioArray</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">numItems</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ATSFontRef</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">status</span> <span class="o">=</span> <span class="n">ATSFontFindFromContainer</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">kATSOptionFlagsDefault</span><span class="p">,</span> <span class="n">numItems</span><span class="p">,</span> <span class="n">ioArray</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">numItems</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">CFStringRef</span> <span class="n">fontName</span> <span class="o">=</span> <span class="n">nil</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">ATSFontGetName</span> <span class="p">(</span><span class="n">ioArray</span><span class="p">[</span><span class="n">fontIndex</span><span class="p">],</span> <span class="n">kATSOptionFlagsDefault</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fontName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">NSFont</span><span class="o">*</span> <span class="n">myFont</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSFont</span> <span class="nl">fontWithName</span><span class="p">:(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="n">fontName</span> <span class="nl">size</span><span class="p">:</span><span class="mi">24</span><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>myFont</code> now contains the NSFont reference to your font. Easy.</p>
<h4 id="raid5-multiple-disk-recovery">RAID5: Recovering from 2-drive failure during rebuild <span class="tag"><span class="Linux">Linux</span></span></h4>
<p>RAID is amazing technology. It lets us take a bunch of cheap disks an arrange them in various configurations that present these disks as one large disk. A particularly popular type of RAID for home users is RAID5. A RAID5 array is typically comprised of 3 disks, however only 2/3 of the disk space is available since 1/3 of the space is used for recovery purposes if one of the disks fail. This is in fact the configuration I’ve arranged my home RAIDi in. I have a RAID5 that consists of 3 disks, 2TB each. The usable space is 4TB with the remaining 2TB used for redundancy (parity).</p>
<p>By design, RAID5 can easily handle a single drive failure but it turns out that single drive failure frequently leads to second drive failure which is not something that RAID5 can handle. Let me explain.</p>
<p>With a single drive failure, you simply purchase a new disk with similar physical characteristics and replace it in the array. When the RAID management system detects a new disk, it attempts to rebuild the array using the redundant data available on the rest of the array. This process touches every piece of data on the existing drives and sometimes causes a second drive failure. The common wisdom is that with the second drive gone it is no longer possible to rebuild the array. However depending on the actual failure type this is not necessarily so. I know because I recently went through this exact scenario.</p>
<p>One of my drives started throwing S.M.A.R.T. errors a few months back so I decided to replace it before it failed catastrophically. I inspected the other two drives in the array and they showed no errors. I replaced the malfunctioning disk, initiated array rebuild, and went to sleep with the rebuild process progressing nicely. In the morning, I saw that the rebuild has failed with linux kernel reporting hardware errors trying to access an existing drive in the array.</p>
<p>At this point in time my RAID5 looked like this:</p>
<ul>
<li>Disk 1: Healthy (from original array)</li>
<li>Disk 2: Hardware failure #2 (from original array)</li>
<li>Disk 3: Blank (new disk to replace hardware failure #1)</li>
</ul>
<p>At this point I despaired and gave up on the whole affair. I knew I had backups for the most important data (family pictures) I really didn’t save anything other than that: school projects, music. While it wasn’t catastrophic, the idea of trying to recover all of this data manually was too heartbreaking so I wanted to give my RAID one more chance. I started googling.</p>
<p>Turns out that hard drive failures may be localized and a wonderful tool called <a href="http://www.gnu.org/software/ddrescue">ddrescue</a> may be the way out. During the rebuild RAID software reads the data from the drive sequentially and aborts when it encounters an error. <code>ddrescue</code> attempts to avoid the damaged sectors by reading the data forwards and backwards. So, I purchased another empty disk and managed to copy the data off the damaged disk. At the end of the process <code>ddrescue</code> reported that it failed to copy 140kBytes or so, which everything considered is not so bad. I added the drives back to the array and it worked! The rebuild went smoothly and now I’m back to a functioning 3 disk RAID5 array. Even though 140kB are technically gone, I haven’t been able to identify what’s missing. Some sort of checksumming would be great for next time.</p>
<p>So, it is possible to recover from two disk failure on Linux software RAID5 depending on the actual failure condition. In the future, I’ll be more proactive in replacing drives. Additionally it makes sense to increase the number of drives in the array to increase fault tollerance. Finally, it would be nice to have some automated monitoring, perhaps with monit and pushbullet.</p>
<h4 id="tig-cheat-sheet">Efficient commit workflow with tig <span class="tag"><span class="Development">Development</span></span></h4>
<p>One of the recommended source control practices is to <a href="http://stackoverflow.com/questions/107264/how-often-to-commit-changes-to-source-control">commit frequently, and often</a>.   I prefer to keep my commits terse and focused, however in practice I’m working on a couple related but independent things in parallel. At commit time, I prefer to tease loosely related things apart and commit them separately.</p>
<p>One way to do that is with the interactive git-add facility that can be invoked with <code>git add -p</code>:</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-07_16-16-56.png"/>
</figure>

<p>It’s a lovely little interface:</p>
<ul>
<li>file name is shown at the top of the output</li>
<li>location of the change set is shown</li>
<li>the prompt is asking whether I want to stage the change (<code>y</code>),  ignore the changes this file (<code>d</code>) and various other obscure options.</li>
</ul>
<p>This process works for the majority of my commit needs. It allows me to review every change before staging it to ensure that only necessary changes get pushed to the central repo.</p>
<p>My main issue with this process is that it’s too linear. When the number of changes exceeds a certain threshold I have trouble remembering what functionality I’m currently committing. I can’t easily inspect the existing staged hunks. The process becomes cumbersome.</p>
<p>This is where <a href="http://jonas.nitro.dk/tig/">tig</a>, a <strong>text-mode interface for Git</strong> comes in. I’m a huge fan of console tools because they are incredibly fast and <strong>tig</strong> is no exception.</p>
<p>Upon launching <strong>tig</strong> you’re presented with the following view:</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-07_16-21-55.png"/>
</figure>

<p>I’m currently interested in the “unstaged changes”. Hitting <code>enter</code> shows a diff between HEAD and current working directory.</p>
<p>But we’re interested more in the stage view that can be activated by hitting <code>S</code> (case matters!):</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-07_16-23-51.png"/>
</figure>

<p>This view should be familiar to anyone who has used <code>git status</code>.  This main view can be navigated with arrow keys. Hitting <code>enter</code> on a file name  will show a secondary window with a diff. This view can be navigated with the <code>j</code> and <code>k</code> keys (vi-like).</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-07_16-19-48.png"/>
</figure>

<p>At this point, we can select individuals lines to stage with the <code>1</code> key, or hit <code>u</code> to stage the whole file.  Individual lines can be staged when there’s some cruft you don’t want to commit - such as debugging statements.</p>
<p>When all changes have been staged, you can hit  <code>C</code> to commit from inside <strong>tig</strong>, or exit (<code>q</code>) and commit as you normally would from command line.</p>
<p>Here’s a small <a href="http://ricostacruz.com/cheatsheets/tig.html">tig cheat sheet</a> for reference.</p>
<h4 id="personal-agile-iteration-1">Personal Agile: Iteration 1 <span class="tag"><span class="Agile">Agile</span><span class="Productivity">Productivity</span><span class="Orgmode">Orgmode</span></span></h4>
<p>There&rsquo;s lots to love about agile, but my personal faves are two things:</p>
<ol>
<li>timeboxed iterations</li>
<li>retrospectives</li>
</ol>
<p>The ultimate goal of agile is to shorten feedback loops. If something is not working it&rsquo;s easier to identify and correct the issue at the point of occurence rather than months down the line. This of it as a <code>REPL</code>
loop for productivity.</p>
<p>I&rsquo;ve been quite successful doing this at work, so I figured why not try it for personal productivity as well? I&rsquo;ve had a couple of projects on the go for a while. I&rsquo;ve made little progress so I wanted to focus and get things truely completed.</p>
<p>Here&rsquo;s what my plan for the first iteration looked like:</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-25_09-49-33.png"/>
</figure>

<p>Now, looking at it, I wish I followed more of the agile methodology and properly worded the tasks/stories I wanted to do. However I did do some things right:</p>
<ul>
<li>I identified specific things I wanted to do.</li>
<li>I did identify completion criteria:
<ul>
<li>In the case of the reading goal it was &ldquo;half a book&rdquo;.</li>
<li>For my app it was 3 hours.</li>
<li>For my fitness goal it was 10 times.</li>
</ul>
</li>
<li>I did provide rough estimates for each activity to ensure that the plan was doable.</li>
</ul>
<p>I also made an attempt at time tracking with <code>org-pomodoro</code>:</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-25_09-56-19.png"/>
</figure>

<p>I&rsquo;m not sure how to use these results just yet, but they do provide an intersting insight. The bulk of the coding project work was done early AM before work/family stuff on weekdays. I will continue with this practice.</p>
<!--list-separator-->
<ul>
<li>
<p>Conclusions</p>
<p>Overall, I&rsquo;ve achieved the goals I was striving for. This list allowed me to focus on the projects I wanted to push forward. Waking up at 5:30am on weekdays left me with enough mindspace and energy to work on personal projects, while chores and other tasks could be done post work.
The fact that I eyeballed the amount of work I could actually complete allowed me to be successful. I did not get overly amibitious. I wanted to see how consistent I could be with this and overall I was.</p>
<p>One of the goals for next iteration is to develop better tracking to better understand how much work I can truely commit to and still be productive.</p>
</li>
</ul>
<h4 id="personal-agile-iteration-2">Personal Agile: Iteration 2 <span class="tag"><span class="Agile">Agile</span><span class="Productivity">Productivity</span><span class="Orgmode">Orgmode</span></span></h4>
<p>The goal for this iteration was to:</p>
<ul>
<li>work on my little SwiftUI app</li>
<li>finish reading a book (&ldquo;The first 90 days&rdquo;)</li>
<li>maintain my fitness habits</li>
</ul>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-02-09_21-06-26.png"/>
</figure>

<!--list-separator-->
<ul>
<li>
<p>Conclusions</p>
<p>Overall the iteration went well. In the screenshot above, you can tell that I wildly underestimated how much time summarizing the current book would take: I estimated an hour, but it ended up being 3 times as much (3 hours).</p>
<p>Then, I spent way too much on my app, 10 pomodoros (roughly 5 hours) vs 3 hours initially estimated.</p>
<p>The big fitness goals (workouts) were met, but smaller (morning stretches) didn&rsquo;t pan out. Oh well.</p>
<p>I also forgot to add time to plan for the next iteration, although I did include a task to create a template (which I didn&rsquo;t do).</p>
<p>So, moving forward:</p>
<ul>
<li>create an iteration template (that should include: estimation task and postmortem task).</li>
<li>record the velocity (current sprint is somewhat unusual: I&rsquo;m on vacation).</li>
<li>be very careful of over-committing. Err on the side of not having enough work (to avoid guilt etc).</li>
</ul>
</li>
</ul>
<h4 id="personal-agile-iteration-4">Personal Agile: Iteration 4 <span class="tag"><span class="Agile">Agile</span><span class="Productivity">Productivity</span><span class="Orgmode">Orgmode</span></span></h4>
<p>Interesting iteration. Overall agile approach has been a net positive. I likely would&rsquo;ve have been approximately as successful, but deliberate approach to planning and reviews yields interesting artifacts (of which this blog post is one) and provides for an interesting trajectory overview.</p>
<p>I made good progress on my tasks this iteration:</p>
<ul>
<li>adding two additional chapters reviewed to &ldquo;First 90 days&rdquo;. It&rsquo;s becoming a bit tedious, but I feel it&rsquo;s critical to finish this book.</li>
<li>moving forward with my <code>org-friend</code> SwiftUI project.</li>
</ul>
<p>In terms of my application, I feel like I&rsquo;ve committed two cardinal sins of software engineering</p>
<ol>
<li>I started gold plating.</li>
<li>I added more work to an iteration that&rsquo;s already in progress.</li>
</ol>
<!--list-separator-->
<ul>
<li>
<p>Scope creep and gold plating</p>
<p>When I initially started this project, the goal was a really simple utility application. Which means minimal UI. However as things progressed, it became apparent that there needs to be a splash screen, a settings screen and a &ldquo;log view&rdquo;. Even though the fundamentally the application has been working since the second iteration, I haven&rsquo;t been happy with the overall visual appearance. So I&rsquo;m working on that now. I reached out to some folks that I know, but they are busy. I approach some contractors on Fiverr with some success. In any case, the takeaway here is that suddenly I&rsquo;m spending more time on look and feel for an application that&rsquo;s supposed to spend most of it&rsquo;s time in the background. The justification I use is that since this is a showcase for my work, a portfolio piece, I want it to look nice. First impressions and all.</p>
<p>Here&rsquo;s a UI designed by a developer. No good.</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-03-09_11-07-09.png"/>
    </figure>

</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Adding work to an iteration in progress</p>
<p>I got mixed feelings about this one. Personally I don&rsquo;t think this is a huge problem if negotiated properly. In a team of 1 it&rsquo;s really easy. In a larger team this would have to be managed very carefully and be an exception. I&rsquo;m doing this for fun largely so I roll with it.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Conclusion</p>
<p>Overall a healthy and productive iteration. I made progress on both of my little projects. One area where I hope to improve is time tracking. I know I&rsquo;m missing time here. This is largely the function of learning Emacs.</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-03-09_11-09-27.png"/>
    </figure>

</li>
</ul>
<h4 id="personal-agile-iteration-5">Personal Agile: Iteration 5 (COVID-19 edition) <span class="tag"><span class="Agile">Agile</span><span class="Productivity">Productivity</span><span class="Orgmode">Orgmode</span><span class="UIUX">UIUX</span></span></h4>
<p>It&rsquo;s been pretty hard to focus on anything other than what&rsquo;s going on in the world the last two weeks. I didn&rsquo;t really successfully complete the iteration. We&rsquo;ve been sent home from work about a week ago which freed up
a lot of time that&rsquo;s been allocated to the commute. Theoretically. Unfortunately focus has been hard to come by.</p>
<p>The only take away I have from this iteration is that I&rsquo;ve significantly reversed my position on UI/UX.</p>
<p>I&rsquo;ve always been of the opinion that functionality should be prioritized over look and feel. Now I&rsquo;m not sure that it&rsquo;s so cut and dry any more. I don&rsquo;t know when this happened but looking at the last 3 iterations; the vast majority of work has been in the UIUX area.</p>
<p>Why? One of the goals of this application is to showcase my abilities as a developer, and first impressions are really important. <span class="underline">I did not want to deliver and ugly app</span>. I&rsquo;m still processing this. UI work is definitely not easy. Working on UI reduces the number of hours I can spend on other things.</p>
<p>Previously, I&rsquo;d make an argument that I&rsquo;d rather use an ugly app that does a lot rather than app that is pleasant that does only a little bit. I&rsquo;m still not sure where to draw that line, but it&rsquo;s interesting to think about.</p>
<h4 id="still-around">Still Around</h4>
<p>Nearly a year after my previous entry, I&rsquo;m trying to get into blogging yet again. I&rsquo;ve got a huge backlog of posts I&rsquo;m interested in sharing but it&rsquo;s been a challenge to get through it for various reasons. It&rsquo;s not New Year&rsquo;s, but here&rsquo;s a commitment, write one post every two weeks. Should be doable?</p>
<h4 id="what-is-hyperscheduling">What is hyper-scheduling? <span class="tag"><span class="Productivity">Productivity</span><span class="Emacs">Emacs</span></span></h4>
<!--list-separator-->
<ul>
<li>
<p>Hyperscheduling?; TLDR</p>
<p>Hyperscheduling is the idea of fully planning your day using a calendar. Every minute of the day is assigned to some task using a calendar.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Hyperscheduling in more detail</p>
<p>Hyperscheduling is only part of a productivity system. It helps me plan my day:</p>
<ol>
<li>Select a set of tasks for today (this is done outside of hyperscheduling, using GTD or another system).</li>
<li>Prioritize your tasks in order of importance.</li>
<li>Lay your tasks out on the calendar.</li>
</ol>
<p>Step #3 is where the magic is. By visually moving time blocks around on a calendar, I get the following benefits:</p>
<ul>
<li>evaluate whether my estimate for the task is correct. Am I really going to finish this task in 1hr?</li>
<li>evaluate the order of tasks. Am I really going to be able to switch from Task A to task B with no break?</li>
<li>surface appointments. I have a standing &ldquo;lunch&rdquo; calendar entry that reminds me that lunch time is not available work tasks.</li>
</ul>
<p>At the end of this daily process I end up with a list of tasks that I believe I can complete by the end of the day because:</p>
<ul>
<li>I reviewed my effort estimates</li>
<li>I found a time slot for all of the tasks</li>
<li>I built in time for breaks and other obligations.</li>
</ul>
<p>Everyone is wired differently but it&rsquo;s been hugely successul for me, because I&rsquo;m able to use realistic criteria for planning my day. Using a visual tool for this removes friction and facilitates the process.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>More</p>
<p>I first learned about hyperscheduling from MacSparky. He has a great <a href="https://www.macsparky.com/blog/2018/03/hyper-scheduling-feedback-2/">FAQ</a>.</p>
</li>
</ul>
<h4 id="journaling-prompts-with-emacs">Journaling prompts in Emacs <span class="tag"><span class="Emacs">Emacs</span><span class="Misc">Misc</span></span></h4>
<p>One of my daily rituals is journaling. It&rsquo;s been shown to have positive impact on quality of life (citation needed). I find it helps me decompress but it&rsquo;s also a permanent record of my thoughts and my life&rsquo;s minutiae.</p>
<p>I usually set a timer for 5 minutes and go to town. One particular challenge I have, is that some times I don&rsquo;t really know what to write about. Recently I came upon the idea of journaling prompts. So far, journaling prompts come in the form of questions:</p>
<blockquote>
<p>What do I know to be true that I didn’t know a year ago?</p>
<p>What distractions get in the way of being my most productive?</p>
</blockquote>
<p>In Emacs, it&rsquo;s trivial to automate prompt generation. I used org-mode&rsquo;s capture templates and here&rsquo;s what I came up with:</p>
<p>A function to grab a prompt:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">dm/get-journaling-prompt</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Returns a single line from journaling prompts.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">save-window-excursion</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">find-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-roam-directory</span> <span class="s">&#34;journaling_prompts.org&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">number-of-prompts</span> <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nv">line-number-at-pos</span><span class="p">)</span> <span class="mi">10</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">goto-line</span> <span class="p">(</span><span class="nf">+</span> <span class="mi">10</span> <span class="p">(</span><span class="nf">random</span> <span class="nv">number-of-prompts</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">s-chomp</span> <span class="p">(</span><span class="nv">thing-at-point</span> <span class="ss">&#39;line</span> <span class="no">t</span><span class="p">)))))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>and then in my capture templates:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="s">&#34;dj&#34;</span> <span class="s">&#34;Journal&#34;</span> <span class="nv">entry</span>
</span></span><span class="line"><span class="cl"> <span class="p">(</span><span class="nv">file+olp+datetree</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/personal-daily-2022.org&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> <span class="s">&#34;* Entered on %U
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">  Prompt: %(dm/get-journaling-prompt)
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">%?&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>It&rsquo;s wonderfully simple, the <code>%(dm/get-journaling-prompt)</code> simply executes the expression and returns the result. As usual, more in the <a href="https://orgmode.org/manual/Template-expansion.html">docs</a>.</p>
<p>The result looks like this:</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-07-17_13-10-28_screenshot.png"/>
</figure>

<p>It&rsquo;s an easy way to get journaling if nothing else comes up.</p>
<h3 id="diy">DIY</h3>
<h4 id="diy-lithium-battery-part-1">Building a lithium ion battery, part 1: “Why”</h4>
<p>Why build a battery? Why build a battery from scratch? I’ll tell you.</p>
<!--list-separator-->
<ul>
<li>
<p>Why build a battery from scratch?</p>
<p>Battery technology is becoming very important. Cell phones, laptops and now cars rely on batteries for power. More importantly, I needed a battery unit for reasons (more on this later).</p>
<p>I could’ve purchased a battery off the shelf, but consumer units are quite expensive. For example [<a href="https://www.mec.ca/en/product/5055-474/Yeti-400-Lithium">Goal Zero Yeti 400 Lithium</a> is $800. I thought I could build one for about a 1/3 of the price.</p>
<p>I was also curious to understand how modern lithium batteries work. So really, the combination of wanting to save money and nerd out and learn something about electronics/battery tech were the two driving reasons behind this experiment.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Why do I need a battery at all?</p>
<p>I’d like to have a massive power bank for when we go camping. I also have a small portable projector for watching movies when we’re car camping. I know purists will disagree, but here we are. Also nerding out.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Why lithium batteries?</p>
<p>Briefly, there are two types of batteries:</p>
<ul>
<li>lead acid  - like the starter battery in your car</li>
<li>lithium ion- like the one in your cell phone</li>
</ul>
<p>Lead acid tend to be easier to maintain, while lithium ion are quite finicky. However lead acid battery are typically 3-5 times heavier than an equivalent lithium ion battery. Lithium ion batteries have a better cycle life and are therefore more energy dense.</p>
<p>I also thought I could go on craigslist and purchase some reclaimed lithium ion cells to  bring the overall cost down.</p>
<p>Overall cost to performance ratio is in favour of lithium ion cells.</p>
<p>In the next instalment I’ll describe my prototyping efforts. Here’s the teaser, a functional 4S6P 18650 battery.</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2019-07-12_11-06-27.png"/>
    </figure>

<p>#blog
#public</p>
</li>
</ul>
<h3 id="technical-stuff">Technical stuff</h3>
<h4 id="how-to-check-for-x-sendfile">How to check for X-Send-File (or X-Accel-Redirect) <span class="tag"><span class="Development">Development</span></span></h4>
<p>Some web requests should not be handled by the application framework. Requests hitting a dynamic API endpoint should be processed by application (in my case typically Ruby on Rails). Static assets (such as files) should be served by the webserver, bypassing Ruby on Rails completely.</p>
<p>Why?</p>
<p>There are a couple of reasons.</p>
<p>The biggest one is performance. NGINX and Apache are significantly better and faster at serving files than a Ruby process. It’s the whole reason for their existence.</p>
<p>Secondly, leaving Ruby processes out of serving static files frees that process up to serve dynamic requests.</p>
<p>For example, here Ruby is serving a font file. It ties the ruby process up for over half a second for no reason.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">I, <span class="o">[</span>2018-09-02T22:50:21.284547 <span class="c1">#33169]  INFO — : Sent file ff133.ttf (0.3ms)</span>
</span></span><span class="line"><span class="cl">I, <span class="o">[</span>2018-09-02T22:50:21.284839 <span class="c1">#33169]  INFO — : Completed 200 OK in 633ms (ActiveRecord: 61.4ms)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>It should be noted, that webservers typically have hundreds of threads serving requests, whereas the application (Ruby on Rails) has on the order of tens of processes. So tying a ruby process up to serve files is wasteful.</p>
<p>The alternative is <a href="https://www.nginx.com/resources/wiki/start/topics/examples/xsendfile/">XSendfile</a>. Once the application determines that it does not need to serve the file it can signal the webserver to take over.</p>
<p>I always struggle to remember how  to identify requests served by Rails vs requests served by the web server.</p>
<p>Turns out it’s pretty simple.</p>
<p>If the response contains `X-Request-ID` header, then it was served by Rails. Otherwise it was served by the webserver.</p>
<p><a href="https://mattbrictson.com/accelerated-rails-downloads">Matt Bricston</a> has more info.</p>
<h4 id="safari-app-extensions-migrating-from-safariextz">Safari App Extensions; migrating from .safariextz <span class="tag"><span class="Development">Development</span><span class="MacOS">MacOS</span></span></h4>
<p>I’ve dabbled with a Safari extension for a project on and off for a while. For Safari 12, I read that .safariextz-style extensions are no longer supported. I went forth to investigate what changed and how I could port my old extension to Safari 12.</p>
<p>The short story is that the packaging has changed, but the bulk of the existing extension should just work once new conventions are adopted. I imagine the new changes are spurred by Apple’s desire to unify distribution — new extensions are wrapped as a mac application, require a signature and are distributed through the Mac App Store.</p>
<p>I went looking for documentation and stumbled upon the <a href="https://developer.apple.com/videos/play/wwdc2016/214/">Extending your App with Safari App Extensions - WWDC 2016 - Videos - Apple Developer</a> presentation which laid everything out.</p>
<p>There are three major parts:</p>
<ul>
<li>Content blocking</li>
<li>Modifying page behaviour</li>
<li>Extending Safari UI</li>
</ul>
<p>The video starts out describing how to develop the new Safari App Extensions. You need Xcode and dev certificate. The new thing here is that Safari App Extensions are distributed as part of a macOS application and therefore can invoke native code from that application. Neat.</p>
<p>The presenters then go into some specific examples of functionality that Safari App Extensions can have.</p>
<p>They mention that <strong>content blocking</strong> is built upon a model at compile time (?) so there’s no run time evaluation. This is to achieve required speed. The content blocking  API is consistent across macOS and iOS. One interesting tidbit is that  the content blockers don’t get access to individual requests, only the “content blocking” model does. This is for privacy reasons.</p>
<p>The second part was about <strong>Modifying page behavior</strong>, really the part I was looking for.  The important info here is that CSS/JS from your old extensions simply transition to the new app. These assets need to be described in the app’s Info.plist, for example for JS you’d use `SFSafariContentScript`[0]. There’s a new messaging API for the JS to talk to the native code.</p>
<p>Final, third demo was related to <strong>Extending Safari UI</strong>. Safari App Extension can extend Safari’s UI via popovers that house `NSView`s. It sounded like it’d be relatively easy to extend your app’s existing NSViews to show up in Safari. Not something I’m interested, but nevertheless cool.</p>
<p>I went searching for more WWDC notes, and haven’t found much[1]. It’s an excellent resource.</p>
<p>Looks like converting to the new format isn’t so bad. Plus Apple has an <a href="https://developer.apple.com/documentation/safariservices/safari_app_extensions/converting_a_legacy_safari_extension_to_a_safari_app_extension">official conversion how to</a>.</p>
<p>[0]: More keys in the Info.plist in the <a href="https://developer.apple.com/documentation/safariservices/safari_app_extensions/safari_app_extension_info_property_list_keys/about_safari_app_extension_default_keys">official documentation</a>.</p>
<p>[1]: I did find this though:<a href="https://procrastinative.ninja/2018/07/02/wwdc-2018-notes/">WWDC 2018 Notes — Procrastinative Ninja</a>.</p>
<h4 id="ncdu-ncurses-disk-usage">ncdu - ncurses disk usage <span class="tag"><span class="Linux">Linux</span></span></h4>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2019-07-12_11-15-18.png"/>
</figure>

<p>At some point harddrive space was cheap, but with the advent of SSDs and cheap “Cloud VMs” that is no longer the case. For example, the cheapest VM on VULTR is $5/month and has a 15 gig SSD drive. It&rsquo;s suddenly very important to maximize drive usage again. This is where <a href="https://dev.yorhel.nl/ncdu">ncdu</a> comes in. It displays a nice ncurses interface that visualizes the usage breakdown.</p>
<p>So useful key bindings:</p>
<ul>
<li>`?` - help</li>
<li>`g` - to switch display modes</li>
<li>`d` - to kill a subdirectory tree</li>
</ul>
<p>There&rsquo;s a commercial app for Mac that I use and love (because my Mac only has a 256 SSD) called <a href="https://daisydiskapp.com/">DaisyDisk</a>.</p>
<h4 id="shared-memory-on-os-x">Working with shared memory on OS X <span class="tag"><span class="Development">Development</span></span></h4>
<p>If you&rsquo;re working with Qt&rsquo;s <a href="https://duckduckgo.com/?q=qsharedmemory&amp;t=osx&amp;ia=web">QSharedMemory</a>, on Mac OS X you&rsquo;re working with System V shared memory subsystem. If your data is sizable, the first limit you&rsquo;ll hit in the maximum segment size, which is for some reason around 4 megs. To increase it invoke this magic incantation:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo sysctl -w kern.sysv.shmmax<span class="o">=</span><span class="m">33554432</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>and to see other shared mem related kernel variables:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sysctl -A<span class="p">|</span>grep shm
</span></span></code></pre></td></tr></table>
</div>
</div><p>If you&rsquo;d like these settings to remain after you reboot your machine follow the instruction <a href="http://www.spy-hill.net/help/apple/SharedMemory.html">here</a>.</p>
<p>The other problem you&rsquo;re likely to hit is that shared memory persists between processes (as it probably should) unless you detach and then destroy the QSharedMemory object. This makes testing somewhat inconvenient. You can monitor
and remove shared segments with <code>ipcs</code> and <code>ipcrm</code> commands. The first command lists shared segments, the second deletes them.</p>
<p>Again, I&rsquo;ve only verified this on Mac OS X 10.5, but it should work on other Unix-like systems that support System V IPC.</p>
<h4 id="open-source-contribution">Achievement Unlocked: Open Source Contribution <span class="tag"><span class="Development">Development</span><span class="Emacs">Emacs</span><span class="OpenSource">OpenSource</span></span></h4>
<p>I did it. My Emacs package, <a href="https://github.com/dmitrym0/org-hyperscheduler">org-hyperscheduler</a>, is now live on MELPA, <a href="https://melpa.org/#/org-hyperscheduler">here</a>.</p>
<p>I&rsquo;m overjoyed. It&rsquo;s a big deal for me, because I&rsquo;ve been a long time beneficiary of open source software and I&rsquo;m glad to finally be able to give back. It&rsquo;s the first piece of software that I started out writing for myself and got to a state where it&rsquo;s useable for other folks.</p>
<p>Once version 1 was stable, I submitted a <a href="https://github.com/melpa/melpa/pull/8057">pull request</a> to MELPA. Prior to that I ran through their <a href="https://github.com/melpa/melpa/blob/master/CONTRIBUTING.org">checklist</a>. The checklist ensures that style guides are followed, deployment recipe works correctly, etc. Even though I went through the checklist twice, I still managed to miss a couple of things. The reviewer kindly pointed it out:</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-07-25_10-41-45_screenshot.png"/>
</figure>

<p>A few more rounds of back and forth and:</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-07-25_10-42-37_screenshot.png"/>
</figure>

<p>As of July 25, MELPA shows 37 downloads. There are 85 stars on github (and 5 forks):</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-07-25_10-45-20_screenshot.png"/>
</figure>

<p>There is an ocassional <a href="https://github.com/dmitrym0/org-hyperscheduler/issues/19">issue</a> being submitted via GitHub, so the package is being used.</p>
<p>As a software engineer this makes me very happy.</p>
<h4 id="three-ways-to-context-switch-with-git">3 ways to context switch with Git <span class="tag"><span class="Development">Development</span><span class="Git">Git</span></span></h4>
<!--list-separator-->
<ul>
<li>
<p>Blog</p>
<p>What do I mean by &ldquo;switching code context&rdquo;? Imagine you&rsquo;re working on a branch and then you have to jump into a production issue, or inspiration strikes you want to try something new.</p>
<p>There are 2 options I knew of and a third I discovered recently:</p>
<ol>
<li>Check in your code.</li>
<li>Stash your code.</li>
<li>Create a new worktree.</li>
</ol>
 <!--list-separator-->
<ul>
<li>
<p>Checking in</p>
<p>Check in is an obvious option:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git add -p
</span></span><span class="line"><span class="cl">git commit -m <span class="s1">&#39;WIP&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I find that checking code is a distinct and separate activity from writing code. It takes effort to make sure that code is ready; adding comments and sometimes refactoring code before a commit. Thus I prefer to do it when the code is ready.
If I&rsquo;m interrupted before the code has &ldquo;ripened&rdquo;, I&rsquo;m apt to end up with a &ldquo;WIP&rdquo; commit. Not ideal. Perhaps the take away here is that I should get better at squashing and rewriting git history. Instead of a &lsquo;WIP&rsquo; commit, I prefer to stash.</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Stashing</p>
<p>&ldquo;<a href="https://git-scm.com/docs/git-stash">git stash</a>&rdquo; is the next best option if you don&rsquo;t want to litter your history with &ldquo;WIP&rdquo; commits. When you stash, all the local changes are reverted but preserved in special storage area called &ldquo;the stash&rdquo;.</p>
<p>The UI is pretty straightforward:</p>
<ul>
<li><code>git stash</code> preserves your changes.</li>
<li><code>git stash pop</code> applies the changeset at the top of the stash.</li>
<li><code>git stash list</code> shows the stashed changes.</li>
</ul>
 <!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git status
</span></span><span class="line"><span class="cl">On branch feature/react-calendar
</span></span><span class="line"><span class="cl">Your branch is ahead of <span class="s1">&#39;origin/feature/react-calendar&#39;</span> by <span class="m">3</span> commits.
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git push&#34;</span> to publish your <span class="nb">local</span> commits<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Changes not staged <span class="k">for</span> commit:
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span class="o">)</span>
</span></span><span class="line"><span class="cl">modified:   org-hyperscheduler.el
</span></span><span class="line"><span class="cl">modified:   tests/test-org-hyperscheduler.el
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Untracked files:
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl">untracked
</span></span></code></pre></td></tr></table>
</div>
</div><p>Saving a stash. Note that the modified files from above have disappeared (they are in the stash). Untracked files are left alone.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git stash push -m <span class="s1">&#39;example stash&#39;</span>
</span></span><span class="line"><span class="cl">Saved working directory and index state On react-calendar: example stash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">org-hyperscheduler on  feature/react-calendar <span class="o">[</span><span class="nv">$?</span>⇡<span class="o">]</span> via 💎 v2.6.6
</span></span><span class="line"><span class="cl">❯ git status
</span></span><span class="line"><span class="cl">On branch feature/react-calendar
</span></span><span class="line"><span class="cl">Your branch is ahead of <span class="s1">&#39;origin/feature/react-calendar&#39;</span> by <span class="m">3</span> commits.
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git push&#34;</span> to publish your <span class="nb">local</span> commits<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Untracked files:
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl">untracked
</span></span></code></pre></td></tr></table>
</div>
</div><p>Listing all stashes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">❯ git stash list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">stash@<span class="o">{</span>0<span class="o">}</span>: On react-calendar: example stash
</span></span></code></pre></td></tr></table>
</div>
</div><p>We can have as many stashes as needed. When we want to get the changes back we simply reapply them with <code>git stash pop</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git stash pop
</span></span><span class="line"><span class="cl">On branch feature/react-calendar
</span></span><span class="line"><span class="cl">Your branch is ahead of <span class="s1">&#39;origin/feature/react-calendar&#39;</span> by <span class="m">3</span> commits.
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git push&#34;</span> to publish your <span class="nb">local</span> commits<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Changes not staged <span class="k">for</span> commit:
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span class="o">)</span>
</span></span><span class="line"><span class="cl">modified:   org-hyperscheduler.el
</span></span><span class="line"><span class="cl">modified:   tests/test-org-hyperscheduler.el
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Untracked files:
</span></span><span class="line"><span class="cl"><span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl">untracked
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">no changes added to commit <span class="o">(</span>use <span class="s2">&#34;git add&#34;</span> and/or <span class="s2">&#34;git commit -a&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">Dropped refs/stash@<span class="o">{</span>0<span class="o">}</span> <span class="o">(</span>9a6bbe5e521a183fa995fb5014aa05a8ebc9a0bb<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Theoretically this should be sufficient to cover the scenario that I described earlier. When you get interrupted, stash your changes, and switch contexts. In practice, I find the stashing interface awkward to use. I&rsquo;m somewhat convinced it&rsquo;s just the way my brain works.</p>
<p>Thankfully there&rsquo;s another alternative.</p>
</li>
</ul>
 <!--list-separator-->
<ul>
<li>
<p>Worktree</p>
<p><a href="https://git-scm.com/docs/git-worktree">git-worktree </a> is the third option I recently discovered. Instead of modifying your current worktree (like checkin or stash) is simply creates a copy of the HEAD in the directory you specify:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git worktree add ../new-work
</span></span><span class="line"><span class="cl">Preparing worktree <span class="o">(</span>checking out <span class="s1">&#39;new-work&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">HEAD is now at b146d8f Committing JS stuff.
</span></span></code></pre></td></tr></table>
</div>
</div><p>This results in:</p>
<ul>
<li>a new directory <code>../new-work</code> is created that contains the HEAD of the current branch.</li>
<li><code>../new-work</code> by default, checks out a new branch called <code>new-work</code>.</li>
<li>the current tree is unchanged.</li>
</ul>
<p>I really like this approach because it&rsquo;s very quick. I don&rsquo;t have to worry about anything in the current working tree, so the context of the context switch is minimal.</p>
<p>Additionally, <code>stash</code> doesn&rsquo;t take care of untracked state. If there are thigns like transient build files that poluting the source tree, they will remain there with <code>stash</code>. With <code>worktree</code> you get a fully fresh checkout. As a consequence though, you might have to install local dependencies, like Gems or node modules.</p>
<p>Conceptually I find the <code>worktree</code> model superior to ~stash~ing.</p>
<p>To remove a linked worktree simply issue <code>remove</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git worktree remove new-work
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<h3 id="cooking">Cooking</h3>
<h4 id="brisket-how-to">Brisket how to:</h4>
<ul>
<li>count back a couple of hours of rest time</li>
<li>the day of take the brisket out and cover it with your rub</li>
<li>go spark up the chimney. use the minion method.</li>
<li>chimeny should be 2/3 briq. and 1/3 lump.</li>
<li>once the chimeny briquettes are greying dump everything in the smoker.</li>
<li>add hot water to the bowl</li>
<li>put the meat In</li>
<li>when brisket reaches internal temperature of 160f, cover in tinfoil. add some liquid to tinfoil.</li>
<li>when brisket reaches internal temp of 200ish, take it off (in tinfoil) place it in a cooler and let it rest for at least an 2 hours.</li>
</ul>
<h3 id="programming">Programming</h3>
<h4 id="swift-optionals-for-objective-c-programmers">Swift optionals for Objective-C programmers <span class="tag"><span class="Development">Development</span><span class="Swift">Swift</span></span></h4>
<p>:EXPORT_DATE: 2020-01-12
:EXPORT_FILE_NAME: swift-optionals-for-objc-programmers</p>
<p>I&rsquo;m trying my hand at some iOS programming after being away for a while. At this point it does not make sense to start a new project in Objective-C so I started in Swift.</p>
<p>Overall, Swift is very readable and I&rsquo;m fairly productive right out of the gate. One of the new language features that not familiar though, is Optionals.</p>
<p>Due to Objective-C&rsquo;s, C lineage you could do things like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="n">NSString</span><span class="o">*</span> <span class="n">aString</span> <span class="o">=</span> <span class="p">[</span><span class="n">someObject</span> <span class="n">thatReturnsAString</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">aString</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// not nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>or like this, where <code>aString</code> might be <code>nil</code>, but perfectly legal in Objective-C:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="n">NSString</span><span class="o">*</span> <span class="n">aString</span> <span class="o">=</span> <span class="p">[</span><span class="n">someObject</span> <span class="n">thatReturnsAString</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">NSLog</span><span class="p">(</span><span class="err">@</span><span class="s">&#34;Lenght of string: %@&#34;</span><span class="p">,</span> <span class="p">[</span><span class="n">aString</span> <span class="n">length</span><span class="p">]);</span> <span class="c1">// migght be nil, who knows?
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Swift introduces a new type, called <code>Optional</code>. An Optional is either defined or is <code>nil</code>. In that, an optional string (<code>String?</code>) is very similar to it&rsquo;s Objective-C counterpart.
Where things do get interesting is we use a non-optional, <code>String</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="n">var</span> <span class="nl">anOptionalString</span><span class="p">:</span> <span class="n">String</span><span class="o">?</span> <span class="o">=</span> <span class="n">maybeReturnsAString</span><span class="p">();</span> <span class="c1">// maybe returns a string who knows
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">var</span> <span class="nl">aString</span><span class="p">:</span> <span class="n">String</span> <span class="o">=</span> <span class="n">hasToReturnAstring</span><span class="p">();</span> <span class="c1">// gotta be a string, else a compiler error
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>to get the value out of an optional you gotta &ldquo;unwrap it&rdquo;:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="n">var</span> <span class="nl">anOptionalString</span><span class="p">:</span> <span class="n">String</span><span class="o">?</span> <span class="o">=</span> <span class="n">maybeReturnsAString</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">let</span> <span class="n">actualString</span> <span class="o">=</span> <span class="n">anOptionalString</span><span class="o">?</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// there is a string value in there, in other words anOptionalString is not nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">print</span><span class="p">(</span><span class="s">&#34;String is \(actualString)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>In other words, it&rsquo;s reasonable to think of <code>Optional</code> as an Objective-C style ~nil~able pointer.</p>
<ul>
<li>There&rsquo;s a great <a href="https://stackoverflow.com/questions/24003642/what-is-an-optional-value-in-swift">post on stackoverflow</a> that goes through various gotchas and edge cases.</li>
<li><a href="https://developer.apple.com/documentation/swift/optional">Apple&rsquo;s documentation</a> is also worth a look.</li>
</ul>
<h4 id="managing-secrets-in-ios-apps">Managing  secrets in open source iOS apps <span class="tag"><span class="Development">Development</span><span class="OpenSource">OpenSource</span><span class="iOS">iOS</span></span></h4>
<p>One of the issues that open source authors have to deal with is secrets management. The small utility app I&rsquo;m working on relies on Dropbox API. Before you can work with Dropbox API though, you have to generate an API key.
The API key identifies the application to Dropbox and needs to remain mostly secret. A bad actor could impersonate the application author by stealing the API key.</p>
<p>This is a long winded way of saying that API keys must be kept out of public repositories. How can this be achieved?</p>
<p>Turns out it&rsquo;s fairly straightforward. Xcode supports configuration schemes, via <code>xcconfig</code> files.</p>
<p>The process is straightforward.</p>
<ol>
<li>Create a new configuration settings file (via File &gt; New File, use the filter box)</li>
<li>Add the settings to file the (the format is <code>key = value</code>)</li>
<li>Specify the configuration in project target</li>
<li>Configure the <code>Info.plist</code> file (see below)</li>
<li>Use in code.</li>
</ol>
<!--list-separator-->
<ul>
<li>
<p>Config file and settings</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-24_11-48-51.png"/>
    </figure>

</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Contents of the config file</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-24_11-54-09.png"/>
    </figure>

</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Info.plist</p>
<figure><img src="https://dmitrym.online/ox-hugo/screenshot_2020-01-24_11-55-34.png"/>
    </figure>

<p>qq**** Using the variables in code</p>
<p><code>Info.plist</code> values are going to be set at compile time.  To retrieve them something like this can be used:</p>
<p><code>let dropBoxApiKey = Bundle.main.object(forInfoDictionaryKey:&quot;DROPBOX_API_KEY&quot;)</code></p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>References</p>
<p>There&rsquo;s some additional info in the following posts:</p>
<ul>
<li><a href="https://www.lordcodes.com/posts/managing-secrets-within-an-ios-app?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=ios_app_development">Managing secrets within an iOS app | Lord Codes</a></li>
<li><a href="https://medium.com/ios-os-x-development/keeping-secrets-out-of-git-in-your-ios-app-c01a357e824b">Keeping secrets out of Git in iOS</a></li>
<li><a href="https://www.appcoda.com/xcconfig-guide/">Using Xcode Configuration (.xcconfig) to Manage Different Build Settings</a></li>
</ul>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>PS: Removing sensitive data from git history</p>
<p>I would be remiss if I didn&rsquo;t include instructions <a href="https://medium.com/bam-tech/remove-sensitive-information-from-your-git-repository-10cb421f1b84">on how to remove sensitive data from you repository&rsquo;s history</a>.</p>
</li>
</ul>
<h4 id="learning-swift">Learning swift</h4>
<p>If you squint SwiftUI looks kinda like UIKit, but it&rsquo;s not. I wish I saved myself some time and watched:</p>
<p><a href="https://developer.apple.com/videos/play/wwdc2019/204/">https://developer.apple.com/videos/play/wwdc2019/204/</a>  and <a href="https://developer.apple.com/videos/play/wwdc2019/226">https://developer.apple.com/videos/play/wwdc2019/226</a>. SwiftUI is sufficiently different from previous paradigms to invest an hour or two upfront.</p>
<p>Don&rsquo;t forget <a href="https://sarunw.com/posts/swiftui-changes-in-xcode-11-beta-5/">https://sarunw.com/posts/swiftui-changes-in-xcode-11-beta-5/</a> because <code>BindableObject</code> was renamed to <code>ObservableObject</code> since WWDC2019.</p>
<h3 id="books">Books</h3>
<h4 id="book-review-first-90-days">Book review: &ldquo;First 90 days&rdquo;</h4>
<p>The &ldquo;First 90 days&rdquo; lays out  a comprehensive plan on how to become productive in a new role, whether it&rsquo;s a promotion or a position in a new company.</p>
<blockquote>
<p>It’s a mistake to believe that you will be successful in your new job by continuing to do what you did in your previous job, only more so</p>
</blockquote>
<p>The advice is wide ranging. What&rsquo;s useful about this book is that there&rsquo;s nearly a step by step process for every category of advice.</p>
<p><strong>Chapter 1</strong> is all about doing homework and understanding the business. Ideally this happens before the actual transition. It&rsquo;s all about identifying cultural norms, understanding your place within the business and engaging with your new team and boss</p>
<blockquote>
<p>No matter how well you think you understand what you’re expected to do, be sure to check and recheck expectations once you formally join your new organization. Why? Because understandings that are developed before you join—about “mandates, support, and resources—may not prove to be fully accurate once you’re in the job. It isn’t that you’ve been actively misled; rather, it’s because recruiting is like romance, and employment is like marriage.</p>
</blockquote>
<p><strong>Chapter 2</strong> lays out a set of steps to understand the business:</p>
<blockquote>
<p>The first task in making a successful transition is to accelerate your learning. Effective learning gives you the foundational insights you need as you build your plan for the next 90 days</p>
</blockquote>
<p>This includes establishing a learning agenda, compiling a list of questions, understanding vision and strategy, processes, future plans:</p>
<blockquote>
<ul>
<li>How has this organization performed in the past? How do people in the organization think it has performed?</li>
<li>How were goals set? Were they insufficiently or overly ambitious?</li>
<li>Were internal or external benchmarks used?</li>
<li>What measures were employed? What behaviors did they encourage and discourage?</li>
<li>What happened if goals were not met?</li>
</ul>
</blockquote>
<p>There&rsquo;s advice on how to structure introductions with the team to understand what&rsquo;s going on:</p>
<blockquote>
<p>Suppose you decide to meet with your direct reports one-on-one. In what order will you meet with them? And how will you avoid being excessively influenced by what the first couple of people say? One approach is to keep to the same script in all your meetings. You might start with brief opening remarks about yourself and your approach, followed by questions about the other person (background, family, and interests) and then a standard set of questions about the business. This approach is powerful, because the responses you get are comparable. You can line them up side by side and analyze what is consistent and inconsistent</p>
<p>Ask them essentially the same five questions:</p>
<ul>
<li>What are the biggest challenges the organization is facing (or will face in the near future)?</li>
<li>Why is the organization facing ” “or going to face) these challenges?</li>
<li>What are the most promising unexploited opportunities for growth?</li>
<li>What would need to happen for the organization to exploit the potential of these opportunities?</li>
<li>If you were me, what would you focus attention on?</li>
</ul>
</blockquote>
<p>The author advocates creating a &ldquo;learning plan&rdquo; and adhere to it carefully:</p>
<blockquote>
<p>Your learning agenda defines what you want to learn. Your learning plan defines how you will go about learning it. It translates learning goals into specific sets of actions—identifying promising sources of insight and using systematic methods—that accelerate your learning. Your learning plan is a critical part of your overall 90-day plan. In fact, as you will discover later, learning should be a primary focus of your plan for your first 30 days on the job (unless, of course, there is a disaster in progress).</p>
</blockquote>
<p><strong>Chapter 3</strong> identifies a set of common business situations, STARS.</p>
<blockquote>
<p>“!STARS! is an acronym for five common business situations leaders may find themselves moving into:</p>
<ul>
<li>start-up</li>
<li>turnaround</li>
<li>accelerated growth -</li>
<li>realignment, and</li>
<li>sustaining success.</li>
</ul>
</blockquote>
<p>One&rsquo;s responsibilities will differ dependening on the scenario:</p>
<blockquote>
<p>In a realignment, your challenge is to revitalize a unit, product, process, or project that has been drifting into danger.</p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>In sustaining-success situations, you must invent the challenge by finding ways to keep people motivated, combat complacency, and find new direction for growth—both organizational and personal</p>
</blockquote>
<p>The book provides a way to identify the current situation and provides guidance on how to proceed:</p>
<blockquote>
<p>Armed with insight into your STARS portfolio and the key challenges and opportunities,
you will adopt the right strategies for leading change. Doing so means, however, adopting the approaches laid out in this book for creating momentum in your next 90 days. Specifically, you must establish priorities, define strategic intent, identify where you can secure early wins, build the right leadership team, and create supporting alliances.</p>
</blockquote>
<p><strong>Chapter 4</strong> is about negotiating success with your boss. In this context it means arriving at a consensus regarding expectations, deliverables and communication styles.</p>
<blockquote>
<p>Negotiating success means proactively engaging with your new boss to shape the game so that you have a fighting chance of achieving desired goals. Many new leaders just play the game, reactively taking their situation as given—and failing as a result. The alternative is to shape the game by negotiating with your boss to establish realistic expectations, reach consensus, and secure sufficient resources.</p>
</blockquote>
<p>There are specific recommendations.</p>
<p>DON&rsquo;T:</p>
<blockquote>
<ul>
<li>Don’t stay away. If you have a boss who doesn’t reach out to you, or with whom you have uncomfortable interactions, you will have to reach out yourself. Otherwise, you risk potentially crippling communication gaps.</li>
<li>Don’t surprise your boss. It’s no fun bringing your boss bad news. However, most bosses consider it a far greater sin not to report emerging problems early enough. Worst of all is for your boss to learn about a problem from someone else.! It’s usually best to give your new boss at least a heads-up as soon as you become aware of a developing problem.</li>
<li>Don’t approach your boss only with problems. That said, you don’t want to be perceived as bringing nothing but problems for your boss to solve. You also need to have plans for how you will proceed. This emphatically does not mean that you must fashion full-blown solutions: the outlay of time and effort to generate solutions can easily lure you down the rocky road to surprising your boss. The key here is to give some thought to how to address the problem—even if it is only gathering more information—and to your role and the help you will need (This is a good thing to keep in mind in dealing with direct reports, too. It can be dangerous to say, “Don’t bring me problems, bring me solutions.” Far better is, “Don’t just bring me problems, bring me plans for how we can begin to address them”</li>
</ul>
</blockquote>
<p>DO:</p>
<blockquote>
<ul>
<li>Clarify expectations early and often. Begin managing expectations from the moment you consider taking a new role. ”</li>
<li>Take 100 percent responsibility for making the relationship work. This is the flip side of “Don’t stay away.”</li>
<li>Don’t expect your boss to reach out or to offer you the time and support you need!. It’s best to begin by assuming that it’s on your shoulders to make the relationship work. If your boss meets you partway, it will be a welcome surprise</li>
<li>Negotiate time lines for diagnosis and action planning. Don’t let yourself get caught up immediately in firefighting or be pressured to make calls before you’re ready!. Buy yourself some time, even if it’s only a few weeks, to diagnose the new organization and come up with an action plan. It worked for Michael in his dealings with Vaughan, and it can work for you. The 90-day plan discussed at the end of this chapter is an excellent vehicle.</li>
<li>Aim for early wins in areas important to the boss!. Whatever your own priorities, figure out what your boss cares about most. What are his priorities and goals, and how do your actions fit into this picture? Once you know, aim for early results in those areas. ”</li>
<li>Pursue good marks from those whose opinions your boss respects. Your new boss’s opinion of you will be based in part on direct interactions and in part on what she hears about you from trusted others. ”</li>
<li>Simply be alert to the multiple channels through which information and opinion about you will reach your boss.”</li>
</ul>
</blockquote>
<p>Furthermore, having these <strong>5 conversation is a must</strong>:</p>
<blockquote>
<ol>
<li>The situational diagnosis conversation. In this conversation, you seek to understand how your new boss sees the STARS portfolio you have inherited. Are there elements of start-up, turnaround, accelerated growth, realignment, and sustaining success? How did the organization reach this point? What factors—both soft and hard—make this situation a challenge? What resources within the organization can you draw on? Your view may differ from your boss’s, but it is essential to grasp how she sees the situation.</li>
<li>The expectations conversation. Your goal in this conversation is to understand and negotiate expectations. What does your new boss need you to do in the short term and in the medium term? What will constitute success? Critically, how will your performance be measured? When” “your boss’s expectations are unrealistic and that you need to work to reset them. Also, as part of your broader campaign to secure early wins, discussed in the next chapter, keep in mind that it’s better to underpromise and overdeliver.”</li>
<li>The resource conversation. This conversation is essentially a negotiation for critical resources. What do you need to be successful? What do you need your boss to do? The resources need not be limited to funding or personnel. In a realignment, for example, you may need help from your boss to persuade the organization to confront the need for change. Key here is to focus your boss on the benefits and costs of what you can accomplish with different amounts of resources.</li>
<li>The style conversation. This conversation is about how you and your new boss can best interact on an ongoing basis. What forms of communication does he prefer, and for what? Face-to-face? Voice, electronic? How often? What kinds of decisions does he want to be consulted on, and when can you make the call on your own? How do your styles differ, and what are the implications for the ways you should</li>
<li>The personal development conversation. Once you’re a few months into your new role, you can begin to discuss how you’re doing and what your developmental priorities should be. Where are you doing well? In what areas do you need to improve or do things differently? Are there projects or special assignments you could undertake (without sacrificing focus)?</li>
</ol>
</blockquote>
<p>&ldquo;First 90 days&rdquo; is ostensibly a book about onboarding executives, but it&rsquo;s a useful resource for any role. It outlines a great strategy for the first months of being in a new role and supplements it with direct, actionable advice.</p>
<h4 id="note-taking-and-discovery">Note taking and discovery <span class="tag"><span class="Orgmode">Orgmode</span><span class="Emacs">Emacs</span><span class="Productivity">Productivity</span></span></h4>
<p>I&rsquo;ve been taking notes consistently, probably starting in university. The challenge for me was never capture but retrieval. I suspect that&rsquo;s true for most people.</p>
<p>The interesting thing about zettelcasten is how Luhramn optimized his sytem for retrieval. Related subjects were proximate, he used a linking system of sorts that allowed his cards to be filed under number of different topics.</p>
<p>In digital note taking, proximity is difficult to simulate. Hyperlinking is the first step of course. My problem with hyperlinks is that they become lost in the content of the note. The only way to discover them is by scanning the text. This is very slow.</p>
<p>A fairly recent development within note taking application is the &ldquo;graph view&rdquo;.</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-03-10_13-30-32_display.png.png"/>
</figure>

<p>I can&rsquo;t recall where I saw this first; it&rsquo;s not really that important. The fact is more and more note taking tools support this functionality. It&rsquo;s an improvement on &ldquo;simple&rdquo; hyperlinking, because it arranges concepts within a virtual space. In a way, very similar to how Luhrman did it originally with his zettels. This enhances retrievability and discoverability in a huge way.</p>
<p>I&rsquo;m reading a book, &ldquo;The Jakarta Method&rdquo; about the US approach to the communist thread after World War 2. At the top of my notes file, I have meta link to:</p>
<ul>
<li>books</li>
<li>current year</li>
</ul>
<p>and other relevant metadata.</p>
<p>Then within the notes themselves I may have links to my other notes:</p>
<ul>
<li>a link to Indonesia, since this is primarily the book about this country.</li>
<li>a link to Communism</li>
<li>a link to United States</li>
</ul>
<p>and many more links to all the relevant topics.</p>
<p>So the concept map may looks like this:</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-03-10_13-46-31_screenshot.png"/>
</figure>

<p>All the nodes are clickable. If I click on Indonesia, I then get an expanded view of how Indonesia fits into my knowledge base:</p>
<figure><img src="https://dmitrym.online/ox-hugo/2022-03-10_13-48-15_screenshot.png"/>
</figure>

<p>I see that I have a &ldquo;travel destination&rdquo; node linked to Indonesia so I likely found somewhere interesting to visit there. It&rsquo;s also linked to Buddhism and World indicating further relationships.</p>
<p>This is a big deal for data discoverability. Now instead of getting bogged down in details, I can get a high level overview of my concepts. Just as important I can find related concepts and link them.</p>
<h4 id="caddy2-and-tcp-proxying">Caddy 2 and TCP Proxying <span class="tag"><span class="DevOps">DevOps</span></span></h4>
<p>How to configure Caddy2 to proxy TCP streams.</p>
<p>To illustrate the architecture, I have the following entities running in Docker.</p>
<figure><img src="https://dmitrym.online/ox-hugo/gateway-overview-v1.png"/>
</figure>

<p>I&rsquo;m using <a href="https://caddyserver.com">Caddy 2</a> as a reverse proxy, but it looks like it supports many more scenarios. Previously I used nginx, or traeffic. The appeal of Caddy is that it supports TLS (with LetsEncrypt) out of the box and integrates with <a href="https://caddyserver.com/docs/modules/caddy.storage.consul">Consul</a> for an eventual clustering solution with Nomad.</p>
<p>Startup with Caddy was very simple. Configuration with <code>Caddyfile</code> is quite straightforward. I was up and proxying internal HTTP services in no time. I did hit a snag when I needed to proxy non HTTP, in this case an MQTT stream. Turns out it&rsquo;s not very difficult but there&rsquo;s no good description of how to do it.</p>
<p>First, you need to build caddy with <a href="https://github.com/mholt/caddy-l4">caddy-l4</a> plugin:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> caddy:2-builder AS builder</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> xcaddy build <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --with github.com/mholt/caddy-l4<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> caddy:2</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> --from<span class="o">=</span>builder /usr/bin/caddy /usr/bin/caddy<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Since <code>caddy-l4</code> does not support <code>Caddyfile</code> s, the configuration needs to be in JSON. Since I already started with a <code>Caddyfile</code>, I converted it to JSON:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">caddy adapt —config Caddyfile —adapter Caddyfile
</span></span></code></pre></td></tr></table>
</div>
</div><p>I then merged the output with the following manually crafted JSON:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;layer4&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;servers&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;servername&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;listen&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;0.0.0.0:1883&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;routes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;handle&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;tls&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="nt">&#34;handler&#34;</span><span class="p">:</span> <span class="s2">&#34;proxy&#34;</span><span class="p">,</span> <span class="nt">&#34;upstreams&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&#34;dial&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;mqtt-server:1883&#34;</span><span class="p">]}]}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This JSON directs Caddy to:</p>
<ol>
<li>establish a connection on port 1883</li>
<li>terminate the TLS</li>
<li>pass the unencrypted connection to <code>mqtt-server</code> (this hostname is provided and resolved by Docker)</li>
</ol>
<p>Finally, I had to modify the default execution string for the caddy container in my <code>docker-compose.yml</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">caddy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">falcon-caddy:2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;80:80&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;443:443&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;1883:1883&#34;</span><span class="w">   </span><span class="c"># mqtt</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">./caddy/caddyfile.json:/etc/caddy/caddyfile.json</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;caddy&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;run&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-config&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;/etc/caddy/caddyfile.json&#39;</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="org-noter">org-noter <span class="tag"><span class="OpenSource">OpenSource</span><span class="org_noter">org-noter</span></span></h3>
<h4 id="org-noter-official-maintainer">org-noter: I&rsquo;m an official maintainer!</h4>
<p>I haven&rsquo;t contributed to open source software much until last year. It&rsquo;s been an interesting and rewarding process.</p>
<p>My first large contribution was last year when I released my scheduling package for Emacs, <a href="https://github.com/dmitrym0/org-hyperscheduler">org-hyperscheduler.</a>  Later in 2022 I found a fantastic package for taking notes, <a href="https://github.com/org-noter/org-noter">org-noter</a>.</p>
<p>When I dicovered org-noter in the summer of 2022, it was not actively maintained. The last update was at the end of 2019. I asked if <a href="https://github.com/weirdNox/org-noter/pull/129#issuecomment-1181977664">anyone wanted to collaborate on a fork</a> on github and made a post on reddit.</p>
<p>The first feature I wanted to add to org-noter was highlighting. I made a <a href="https://www.youtube.com/watch?v=HCOXva1Ndfk">youtube video </a>about it and posted it in /r/emacs and /r/orgmode. Around that time, Peter Mao reached out to me. He has been using org-noter extensively and wanted to collaborate on maintaining it. We spent some time chatting about what our goals are for the project.</p>
<p>Since then we have:</p>
<ul>
<li>added precise highlighting to PDF mode</li>
<li>standardized the note taking shortcuts</li>
<li>fixed a few bugs</li>
<li>added unit tests</li>
<li>added a continuous integration workflow (via github actions).</li>
</ul>
<p>The biggest change has been taking over maintenance from the original author, Gonçalo Santos. Both myself and Peter have tried contacting him via various means with no success. The goal was to continue updating org-noter&rsquo;s current users via MELPA. In the end Peter contacted MELPA admins and they have assigned the ownership to us.</p>
<p>The feedback from the existing community has been positive.</p>
<p>Not only am I &ldquo;<a href="https://37signals.com/podcast/scratch-your-own-itch/">scratching my own itch</a>&rdquo; but I&rsquo;m also giving back to the OSS community. I&rsquo;ve been enjoying the open source development process. Though &ldquo;<a href="https://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar">The Cathedral and Bazaar</a>&rdquo; is controversial, there is a lot of truth in it. org-noter is growing and becoming better through no effort of a centralized authority. Rather, people are contributing to it in a decentralized fashion.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HCOXva1Ndfk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="misc">Misc</h3>
<h4 id="back-to-personal-agile">Back to Personal Agile <span class="tag"><span class="Productivity">Productivity</span><span class="OpenSource">OpenSource</span><span class="Life">Life</span></span></h4>
<p>Life&rsquo;s been kinda busy. Between family and work, hobbies take a back seat. The quote that applies is &ldquo;A goal without a plan is just a wish&rdquo;. So I want to make a plan.</p>
<p>In IT world, &ldquo;Agile&rdquo; is an invective. Rightfully so. I&rsquo;ve never seen it properly implemented. Usually it&rsquo;s a way to mask the lack of any process. &ldquo;Oh we are agile&rdquo;. Nope, no real plan, permanent firefighting mode.</p>
<p>I&rsquo;m not going to be any different. I&rsquo;m going to steal a couple of things that I feel are beneficial and call it &ldquo;agile&rdquo;.</p>
<p>First, I&rsquo;m going to do sprint planning. Sprint planning is the process of identifying the next set of steps that align with my goals (see &ldquo;a goal without the plan&rdquo; above). The important detail that I see frequently ignored or glosses over, is capacity. My goal for this Personal Agile Reboot is to commit 3 hours a week. That&rsquo;s the entirety of my capacity.</p>
<p>Second, I&rsquo;m going to commit to the work I set out to do. This is another gap I see frequently. We plan an iteration out, but the scope of work is not protected. Outside influences frequently distabilize the prioritized list of tasks and what is delivered at the end of the iteration does not match the goal set at the outset. Frequent course changes disrupt productivity and reduce velocity. Task thrashing also reduces trust in the original planning exercise. If the task list is about to change, there&rsquo;s no point in committing any effort to the planning exercise.</p>
<p>Finally, I will perform retrospectives. The goal of a retrospective is to analyze the performance of the team and derive team velocity. How productive is the team on average? The goal is to be able to go back to step 1 and generate a task list for the next iteration that is doable.</p>
<p>These 3 practices are self-reinforcing.</p>
<p>If you don&rsquo;t properly plan your sprint, you can neither adequately judge your success (or failure) nor derive a proper velocity.</p>
<p>If your sprint remains open to changes, this devalues the planning exercise and reduces it&rsquo;s perceived value in following iterations. Without a stable iteration it&rsquo;s also impossible to generate correct spring velocity.</p>
<p>Finally, if no retrospectives are done it&rsquo;s impossible to course correct (&ldquo;we took on more work last sprint that we could handle&rdquo;).</p>
<p>I&rsquo;ll let you know how it goes.</p>
<h2 id="estimates-redux"><span class="org-todo todo TODO">TODO</span> Estimates Redux</h2>
<p>:BRAIN_FRIENDS: ECCB638A-BF92-454C-B54E-EE19C5DB504D</p>
<p>Estimating is hard. How can we get better at estimating? How do we communicate estimates? Should we stand by our estimates?</p>
<h3 id="story-time">Story time</h3>
<ul>
<li>Manager: How long will this take?</li>
<li>Dev: Uh.. I dunno. Maybe 3 weeks..</li>
<li>Manager: That&rsquo;s too long, can you do it quicker?</li>
<li>Dev: Uh Sure&hellip; if we don&rsquo;t do the blahblah we can get it done in 2 weeks.</li>
</ul>
<p>&hellip; time passes &hellip;</p>
<ul>
<li>Manager: Why&rsquo;s still not done?</li>
</ul>
<p>I still vaguely remember having a conversation like this sometime in the late 90s. At the time I didn&rsquo;t know much about estimating and I was pretty hard on myself. I felt like I let my manager and my team down by not delivered on my promised estimate.
Since then I spent a lot of time trying to figure out to come with correct estimates. I&rsquo;ll spoil it for you: <strong>you can not accurately predict how long it will take to deliver software</strong>.</p>
<h3 id="feel-good">Feel good</h3>
<p>Failures in the other industries</p>
<ul>
<li>The big dig: <a href="https://en.wikipedia.org/wiki/Big_Dig">https://en.wikipedia.org/wiki/Big_Dig</a>. Scheduled to be completed in 1998 (started in &lsquo;91) but Finished in 2007.</li>
<li>Lockheed Martin F-35. &ldquo;7 years behind, and $136 billion over budget&rdquo;
F-35 officials are recategorizing—rather than fixing—major design flaws to be able to claim they have completed the program’s development phase without having to pay overruns for badly needed fixes. Several of these flaws, like the lack of any means for a pilot to confirm a weapon’s target data before firing, and damage to the plane caused by the tailhook on the Air Force’s variant, have potentially serious implications for safety and combat effectiveness.
<a href="https://www.pogo.org/investigation/2018/08/f-35-program-cutting-corners-to-complete-development/">https://www.pogo.org/investigation/2018/08/f-35-program-cutting-corners-to-complete-development/</a>, gun that won&rsquo;t shoot straight</li>
</ul>
<p><a href="https://www.bloomberg.com/news/articles/2020-01-30/f-35-s-gun-that-can-t-shoot-straight-adds-to-its-roster-of-flaws">https://www.bloomberg.com/news/articles/2020-01-30/f-35-s-gun-that-can-t-shoot-straight-adds-to-its-roster-of-flaws</a></p>
<ul>
<li>Canadian Goverentment Phoenix Pay System. As of 2020 it&rsquo;s still being rolled out. Original cost $70 million CAD, may end up costing $2.3 billion CAD. <a href="https://en.wikipedia.org/wiki/Phoenix_pay_system">https://en.wikipedia.org/wiki/Phoenix_pay_system</a></li>
<li><a href="https://codeburst.io/software-estimation-in-the-fractal-dimension-914569e2ccb9">https://codeburst.io/software-estimation-in-the-fractal-dimension-914569e2ccb9</a></li>
</ul>
<h4 id="setimate-apple-power-pad-thing-fund-performances--investors-rather--that-cautionary-tales-episode--6">setimate: apple power pad thing, fund performances (investors  rather), that  cautionary tales episode (6?)</h4>
<h4 id="hurricane-katrina-wikipedia"><a href="https://en.wikipedia.org/wiki/Hurricane_Katrina#Preparations">Hurricane Katrina - Wikipedia</a></h4>
<h4 id="warship-can-t-launch-things-failure-https-news-dot-ycombinator-dot-com-item-id-20568116">Warship can&rsquo;t launch things failure <a href="https://news.ycombinator.com/item?id=20568116">https://news.ycombinator.com/item?id=20568116</a></h4>
<p><span class="timestamp-wrapper"><span class="timestamp">[2019-08-01 Thu 23:27]</span></span></p>
<h3 id="tldr-for-the-devs">TLDR for the devs</h3>
<h3 id="executive-summary-for-an-executive">Executive summary for an executive</h3>
<h3 id="more-in-depth-rigourous-estimation">More in depth, rigourous estimation</h3>
<h3 id="summary-and-conclusions">Summary and conclusions</h3>
<h2 id="inbox"><span class="org-todo todo TODO">TODO</span> inbox</h2>
<h3 id="goatcounter-website-statistics-for-regular-folks"><a href="https://www.goatcounter.com/">GoatCounter – Website statistics for regular folks</a></h3>
<h3 id="blog-post-yabai-and-skhd">Blog post: yabai &amp; skhd</h3>
<h3 id="utterances"><a href="https://utteranc.es/">utterances</a></h3>
<h3 id="managing-secrets-within-an-ios-app-lord-codes"><a href="https://www.lordcodes.com/posts/managing-secrets-within-an-ios-app?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=ios_app_development">Managing secrets within an iOS app | Lord Codes</a></h3>
<h3 id="lingxz-er-a-hugo-theme"><a href="https://github.com/lingxz/er">lingxz/er: a hugo theme</a></h3>
<p>name is Dmitry  asdfasd m</p>
<h3 id="f-35-logistics-system-to-be-reinvented-and-renamed-official-says-reuters">F-35 logistics system to be reinvented and renamed, official says - Reuters</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-01-21 Tue 07:42]</span></span>
<a href="https://www.reuters.com/article/us-usa-pentagon-f35/f-35-logistics-system-to-be-reinvented-and-renamed-official-says-idUSKBN1ZE00D?utm_source=reddit.com">https://www.reuters.com/article/us-usa-pentagon-f35/f-35-logistics-system-to-be-reinvented-and-renamed-official-says-idUSKBN1ZE00D?utm_source=reddit.com</a></p>
<h3 id="long-range-land-attack-projectile-wikipedia">Long Range Land Attack Projectile - Wikipedia</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-01-27 Mon 23:16]</span></span>
<a href="https://en.wikipedia.org/wiki/Long_Range_Land_Attack_Projectile">https://en.wikipedia.org/wiki/Long_Range_Land_Attack_Projectile</a></p>
<h3 id="https-www-dot-youtube-dot-com-watch-v-mj8thmqjisa-excalibur-s"><a href="https://www.youtube.com/watch?v=Mj8ThMqjisA">https://www.youtube.com/watch?v=Mj8ThMqjisA</a> Excalibur’s</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-01-27 Mon 23:21]</span></span></p>
<h3 id="highlighting-in-org-mode"><a href="https://www.gonsie.com/blorg/org-highlight.html">Highlighting in Org-Mode</a></h3>
<h3 id="warship-can-t-launch-things-failure-https-news-dot-ycombinator-dot-com-item-id-20568116">Warship can&rsquo;t launch things failure <a href="https://news.ycombinator.com/item?id=20568116">https://news.ycombinator.com/item?id=20568116</a></h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2019-08-01 Thu 23:27]</span></span></p>
<h3 id="web-foundation-testing-dot-md-at-master-shopify-web-foundation-github">web-foundation/Testing.md at master · Shopify/web-foundation · GitHub</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-02-13 Thu 07:58]</span></span>
<a href="https://github.com/Shopify/web-foundation/blob/master/Best%20practices/Testing.md">https://github.com/Shopify/web-foundation/blob/master/Best%20practices/Testing.md</a></p>
<h3 id="modern-react-testing-part-1-best-practices-artem-sapegin-s-blog">Modern React testing, part 1: best practices — Artem Sapegin’s Blog</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-02-13 Thu 08:03]</span></span>
<a href="https://blog.sapegin.me/all/react-testing-1-best-practices/">https://blog.sapegin.me/all/react-testing-1-best-practices/</a></p>
<h3 id="connect-estimates-and-failures-to-boing-max-disaster-business-people-building-planes-and-buisiness-people-building-software-dot">connect estimates and failures to boing max disaster - business people building planes, and buisiness people building software.</h3>
<h3 id="blog-it-seems-liek-there-are-a-lot-of-parallels-between-software-engineering-as-a-discipline-and-boeing-de-evolution-into-a-business-driven-company-rather-than-an-engineering-company-dot-what-can-software-industry-learn-from-that-given-that-software-was-initially-dominated-by-academia--internet-etc--dot">[blog] It seems liek there are a lot of parallels between Software engineering as a discipline and Boeing de-evolution into a business driven company rather than an engineering company. What can software industry learn from that? Given that software was initially dominated by academia (internet etc).</h3>
<h3 id="connect-estimates-to-moral-mazes-and-estimations-in-develop-hegemony">Connect estimates to moral mazes and estimations in Develop Hegemony</h3>
<h3 id="for-estimates-blog-post-the-date-was-defined-without-up-front-understanding-of-how-they-d-hit-it--see-tsb-disaster-tsb-disaster-dot-md">for estimates blog post: The date was defined without up-front understanding of <strong>how</strong> they&rsquo;d hit it (see <a href="">tsb disaster</a>)</h3>
<h3 id="lessons-from-the-tsb-failure-a-perfect-storm-of-waterfall-failures">Lessons from the TSB failure: a perfect storm of waterfall failures</h3>
<p><span class="timestamp-wrapper"><span class="timestamp">[2020-02-23 Sun 10:35]</span></span>
<a href="https://medium.com/@JonHall_/lessons-from-the-tsb-failure-a-perfect-storm-of-waterfall-failures-4f4d2e789b35">https://medium.com/@JonHall_/lessons-from-the-tsb-failure-a-perfect-storm-of-waterfall-failures-4f4d2e789b35</a></p>
<h3 id="i-could-do-that-in-a-weekend"><a href="https://danluu.com/sounds-easy/">I could do that in a weekend!</a></h3>
<p>&gt; If we look at search, how do we make sure that different forms of dates and phone numbers give the same results?</p>

      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dmitry-m-viridis-quo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
      <p>General Nerdery.</p>
    
    
      
        © 2023
      
       Dmitry M 
    
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
